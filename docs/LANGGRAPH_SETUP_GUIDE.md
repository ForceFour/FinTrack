# **LangGraph Setup Guide: Local vs Cloud Confusion**

## **ü§î The Confusion: Two Different Studios**

When working with LangGraph, you'll encounter **two different "Studios"** that look similar but serve completely different purposes. This guide explains the difference and how to use each one correctly.

---

## **üîç What Happened**

You ran `py test_workflow_suggestions.py` and saw traces in **LangSmith Cloud Studio**, but when you tried to run the workflow there, you got:

```
Invalid thread ID: must be a UUID
```

Then you ran `langgraph dev` and got a **local Studio** that worked properly. Here's why:

### **‚ùå LangSmith Cloud Studio (smith.langchain.com)**
- **Thread ID**: `workflow_19567db6` (custom format - **NOT a UUID**)
- **Error**: "Invalid thread ID: must be a UUID"
- **Graphs**: Not visible in Studio
- **Execution**: Cannot run workflows directly

### **‚úÖ Local LangGraph Dev Studio (http://127.0.0.1:2024)**
- **Thread ID**: `ed73f23f-fa95-48eb-9f9a-2d2a9da21b6f` (**proper UUID format**)
- **Graphs**: ‚úÖ Visible and interactive
- **Execution**: ‚úÖ Can run workflows directly in UI

---

## **üèóÔ∏è The Two Systems Explained**

### **1. Local LangGraph Development (`langgraph dev`)**

#### **What It Is:**
- Local development server for LangGraph workflows
- Runs on your machine at `http://127.0.0.1:2024`
- Provides a web-based Studio interface for development

#### **What You Can Do:**
- ‚úÖ **View workflow graphs** visually
- ‚úÖ **Run workflows** directly from the UI
- ‚úÖ **Debug step-by-step** execution
- ‚úÖ **Test different inputs** interactively
- ‚úÖ **See real-time agent status** during execution

#### **Thread IDs:**
- Format: `ed73f23f-fa95-48eb-9f9a-2d2a9da21b6f` (proper UUID)
- Generated by: Local LangGraph server
- Compatible with: Local Studio operations

#### **Metadata Example:**
```json
{
  "created_by": "system",
  "graph_id": "minimal_workflow",
  "assistant_id": "09d2ac07-cad3-5e81-8790-aee861c6a4e2",
  "from_studio": true,
  "LANGGRAPH_API_URL": "http://127.0.0.1:2024",
  "run_attempt": 1,
  "thread_id": "ed73f23f-fa95-48eb-9f9a-2d2a9da21b6f",
  "host": "127.0.0.1:2024"
}
```

### **2. LangSmith Cloud (smith.langchain.com)**

#### **What It Is:**
- Cloud-based monitoring and tracing service
- Hosted platform for observing workflow executions
- Analytics and debugging for production deployments

#### **What You Can Do:**
- ‚úÖ **View execution traces** from any LangGraph runs
- ‚úÖ **Monitor performance** and errors
- ‚úÖ **Analyze usage patterns** and costs
- ‚úÖ **Debug failed runs** with detailed logs
- ‚ùå **Cannot run workflows** directly (read-only)

#### **Thread IDs:**
- Format: `workflow_19567db6` (custom prefixed format)
- Generated by: Your application code or test scripts
- Purpose: Tracking runs across different environments

#### **Metadata Example:**
```json
{
  "thread_id": "workflow_19567db6",
  "revision_id": "a9ac06f-dirty",
  "ls_run_depth": 0,
  "LANGGRAPH_API_URL": "http://127.0.0.1:2024"
}
```

---

## **üîÑ How They Work Together**

### **Typical Development Workflow:**

1. **Development & Testing** ‚Üí Use `langgraph dev`
2. **Production Monitoring** ‚Üí Use LangSmith Cloud

### **Data Flow:**
```
Your Code/Test Script ‚Üí LangGraph Server ‚Üí LangSmith Cloud (traces)
                              ‚Üì
                       Local Studio (development)
```

### **Thread ID Generation:**
- **Local Studio**: Generates proper UUIDs for execution
- **Your Code**: Can generate custom thread IDs for tracking
- **LangSmith**: Stores traces with whatever thread_id is provided

---

## **üöÄ Recommended Setup & Usage**

### **For Development (Use This Most of the Time):**

```bash
# Start local development server
cd c:\Users\ASUS TUF A15\Documents\Projects\fintrack
langgraph dev
```

**Then open:** `http://127.0.0.1:2024`

### **For Production Monitoring:**

1. **Configure LangSmith API keys** in your `.env` file
2. **Run your application** (API server, tests, etc.)
3. **View traces** at `smith.langchain.com`

### **For Testing Workflows:**

```bash
# Run test script (traces go to LangSmith)
python test_workflow_suggestions.py

# View results in LangSmith Cloud
# OR
# Use local studio for interactive testing
langgraph dev
```

---

## **üîß Configuration Files**

### **langgraph.json (Local Development)**
```json
{
  "dependencies": ["."],
  "graphs": {
    "minimal_workflow": "langgraph_server:app",
    "full_pipeline": "src.workflows.langgraph_exports:full_pipeline"
  },
  "env": ".env"
}
```

### **Environment Variables (.env)**
```bash
# LangSmith Configuration (for tracing)
LANGSMITH_API_KEY=your_api_key
LANGSMITH_PROJECT=fintrack-dev

# Local LangGraph (for development)
LANGGRAPH_API_URL=http://127.0.0.1:2024
```

---

## **üß™ Testing Your Setup**

### **Test Local LangGraph Dev:**

```bash
# 1. Start the server
langgraph dev

# 2. Open browser to http://127.0.0.1:2024

# 3. You should see:
# - Your workflow graphs
# - Ability to input data and run workflows
# - Real-time execution visualization
```

### **Test LangSmith Integration:**

```bash
# 1. Run a test script
python test_workflow_suggestions.py

# 2. Check LangSmith dashboard
# - Should see traces with thread_id format: workflow_*
# - Should show execution details and metadata
```

---

## **‚ùì Common Questions**

### **Q: Why can't I run workflows in LangSmith Studio?**
**A:** LangSmith is for viewing traces only. Use local `langgraph dev` to run workflows interactively.

### **Q: Why do thread IDs look different?**
**A:** Local Studio uses UUIDs for execution tracking. Your code can use any format for LangSmith tracing.

### **Q: Can I use both at the same time?**
**A:** Yes! Run `langgraph dev` locally while your traces go to LangSmith for monitoring.

### **Q: Which one should I use for debugging?**
**A:** Local LangGraph Dev Studio - you can see the graph execution step-by-step.

### **Q: Do I need LangSmith for development?**
**A:** No, but it's useful for monitoring and analyzing runs. Local dev is sufficient for building workflows.

---

## **üéØ Quick Reference**

| Feature | Local LangGraph Dev | LangSmith Cloud |
|---------|-------------------|-----------------|
| **Purpose** | Development & Testing | Monitoring & Analytics |
| **Graphs Visible** | ‚úÖ Yes | ‚ùå No |
| **Run Workflows** | ‚úÖ Yes | ‚ùå No |
| **Thread ID Format** | UUID | Custom |
| **Cost** | Free | Paid service |
| **Setup** | `langgraph dev` | API keys + config |
| **Best For** | Building & debugging | Production monitoring |

---

## **üö® Troubleshooting**

### **"Invalid thread ID" in LangSmith:**
- This is expected - LangSmith Studio can't execute workflows
- Use local `langgraph dev` instead

### **Graphs not showing in local Studio:**
```bash
# Check your langgraph.json configuration
# Ensure workflow exports are correct
# Restart langgraph dev
```

### **Traces not appearing in LangSmith:**
```bash
# Check LANGSMITH_API_KEY in .env
# Verify LANGSMITH_PROJECT is set
# Ensure network connectivity
```

---

## **üìö Additional Resources**

- [LangGraph Documentation](https://langchain-ai.github.io/langgraph/)
- [LangSmith Documentation](https://docs.smith.langchain.com/)
- [Local Development Guide](https://langchain-ai.github.io/langgraph/tutorials/introduction/)

---

*Date: October 8, 2025*
*Document Version: 1.0*
*Last Updated: October 8, 2025*</content>
<parameter name="filePath">c:\Users\ASUS TUF A15\Documents\Projects\fintrack\docs\LANGGRAPH_SETUP_GUIDE.md
